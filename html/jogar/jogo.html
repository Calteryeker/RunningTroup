<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta lang="pt-BR"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="description" content="RunningTroup Game for TV"/>

  <title>RunningTroup</title>

  <link rel="stylesheet" type="text/css" href="../../css/jogo.css"/>
  <script src="../../js/main.js"></script>
  <script src="../../js/jogo.js"></script>
</head>

<body onload="focarLoad('personagem')">
  <script>
    var canJump = true;
    document.addEventListener('keydown', (e)=>{
      if((e.keyCode == 38 || e.keyCode == 13) && canJump){
        canJump = false;
        pular();
        setTimeout(() => {
          canJump = true;
        }, 1000)
      }
    })

    setTimeout(()=>{
      const params = new URLSearchParams(window.location.search)

      var players_pontuations = ''
      for(var i = 1; i <= params.get('actual'); i++){
        players_pontuations += '&p'+i+'='+(params.get('p'+i) || params.get('pontuacao') || pontuacao) 
      }

      if(params.has('num_players')){
        params.get('num_players') !== params.get('actual') ? 
        navigate('./gameovermp.html?pontuacao='+pontuacao
              +'&num_players='+params.get('num_players')
              +'&actual='+params.get('actual')
              +'&next='+(parseInt(params.get('actual'))+1)
              +players_pontuations)
         : navigate('./mpfinal.html?num_players='+params.get('num_players')+players_pontuations)

      }
      else{
        navigate('./gameover.html?pontuacao='+pontuacao)
      }
      
    }, 5000)
</script>
  <div id="jogo">
    <p id="placar">Pontuação: 000000</p>
    <div id="personagem"></div>
    <div id="lixeira"></div>
    <div id="pedras"></div>
    <div id="barreira"></div>
  </div>

</body>
<footer><a href="https://www.flaticon.com/free-icons/run" title="run icons">Run icons created by Freepik - Flaticon</a></footer>
</html>